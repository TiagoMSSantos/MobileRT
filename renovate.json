{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "enabled": true,
  "extends": [
    "config:base",
    "github>whitesource/merge-confidence:beta",
    ":dependencyDashboard",
    ":rebaseStalePrs",
    ":automergePr",
    ":automergeRequireAllStatusChecks",
    ":automergeDigest",
    ":automergeLinters",
    ":automergeTesters",
    ":automergeTypes",
    ":automergePatch",
    ":semanticCommits"
  ],
  "timezone": "UTC",
  "branchPrefix": "up-renovate-",
  "fetchReleaseNotes": true,
  "separateMajorMinor": true,
  "separateMinorPatch": true,
  "separateMultipleMajor": true,
  "separateMultipleMinor": false,
  "ignoreTests": false,
  "ignoreUnstable": true,
  "prConcurrentLimit": 10,
  "prHourlyLimit": 0,
  "branchConcurrentLimit": 0,
  "rebaseWhen": "auto",
  "reviewersFromCodeOwners": true,
  "recreateClosed": false,
  "major": {
    "enabled": true,
    "automerge": false
  },
  "minor": {
    "enabled": true,
    "automerge": false
  },
  "patch": {
    "enabled": true,
    "automerge": true,
    "groupName": "all patch updates"
  },
  "regex": {
    "enabled": true
  },
  "git-submodules": {
    "enabled": false
  },
  "bundler": {
    "enabled": false
  },
  "conan": {
    "enabled": true
  },
  "pre-commit": {
    "enabled": true
  },
  "docker": {
    "enabled": true
  },
  "dockerfile": {
    "enabled": true
  },
  "gradle": {
    "enabled": true
  },
  "maven": {
    "enabled": true
  },
  "customManagers": [
    {
      "fileMatch": ["Dockerfile", "\\.github\\/workflows\\/.+\\.ya?ml"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "BASE_IMAGE=(?<depName>.*?):(?<currentValue>.*)",
        "BASE_IMAGE: (?<depName>.*?):(?<currentValue>.*)"
      ],
      "datasourceTemplate": "docker",
      "customType": "regex"
    },
    {
      "fileMatch": ["\\.github\\/workflows\\/.+\\.ya?ml"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "host_os: (?<depName>.*?)-(?<currentValue>.*)",
        "runs-on: (?<depName>.*?)-(?<currentValue>.*)"
      ],
      "datasourceTemplate": "github-runners",
      "customType": "regex"
    },
    {
      "fileMatch": ["build.gradle"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "common_libraries_android_framework = ['\"](?<currentValue>.*)['\"]"
      ],
      "depNameTemplate": "androidx.core:core-ktx",
      "datasourceTemplate": "maven",
      "versioningTemplate": "gradle",
      "customType": "regex",
      "registryUrlTemplate": "https://dl.google.com/android/maven2"
    },
    {
      "fileMatch": ["\\.github\\/workflows\\/android_matrix\\.json"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "['\"]gradle_version['\"]: ['\"](?<currentValue>.*?)['\"]"
      ],
      "depNameTemplate": "com.android.tools.build:gradle",
      "datasourceTemplate": "maven",
      "versioningTemplate": "gradle",
      "customType": "regex",
      "registryUrlTemplate": "https://dl.google.com/android/maven2"
    },
    {
      "fileMatch": ["\\.github\\/workflows\\/android_matrix\\.json"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "['\"]ndk_version['\"]: ['\"](?<currentValue>.*?)['\"]"
      ],
      "depNameTemplate": "android/ndk",
      "datasourceTemplate": "github-releases",
      "customType": "regex",
      "registryUrlTemplate": "https://github.com"
    },
    {
      "fileMatch": ["app\\/third_party\\/CMakeLists\\.txt"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "set\\( BOOST_VERSION ['\"]boost-(?<currentValue>.*?)['\"] \\)"
      ],
      "depNameTemplate": "boostorg/boost",
      "datasourceTemplate": "github-releases",
      "customType": "regex",
      "registryUrlTemplate": "https://github.com"
    },
    {
      "fileMatch": ["app\\/third_party\\/CMakeLists\\.txt"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "set\\( GLM_VERSION ['\"](?<currentValue>.*?)['\"] \\)"
      ],
      "depNameTemplate": "g-truc/glm",
      "datasourceTemplate": "github-releases",
      "customType": "regex",
      "registryUrlTemplate": "https://github.com"
    },
    {
      "fileMatch": ["app\\/third_party\\/CMakeLists\\.txt"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "set\\( STB_VERSION ['\"](?<currentValue>.*?)['\"] \\)"
      ],
      "depNameTemplate": "nothings/stb",
      "datasourceTemplate": "github-releases",
      "customType": "regex",
      "registryUrlTemplate": "https://github.com"
    },
    {
      "fileMatch": ["app\\/third_party\\/CMakeLists\\.txt"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "set\\( TINYOBJLOADER_VERSION ['\"](?<currentValue>.*?)['\"] \\)"
      ],
      "depNameTemplate": "syoyo/tinyobjloader",
      "datasourceTemplate": "github-releases",
      "customType": "regex",
      "registryUrlTemplate": "https://github.com"
    },
    {
      "fileMatch": ["app\\/third_party\\/CMakeLists\\.txt"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "set\\( GOOGLETEST_VERSION ['\"](?<currentValue>.*?)['\"] \\)"
      ],
      "depNameTemplate": "google/googletest",
      "datasourceTemplate": "github-releases",
      "customType": "regex",
      "registryUrlTemplate": "https://github.com"
    },
    {
      "fileMatch": ["app\\/third_party\\/CMakeLists\\.txt"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "set\\( PCG_CPP_VERSION ['\"](?<currentValue>.*?)['\"] \\)"
      ],
      "depNameTemplate": "imneme/pcg-cpp",
      "datasourceTemplate": "github-releases",
      "customType": "regex",
      "registryUrlTemplate": "https://github.com"
    }
  ],
  "packageRules": [
    {
      "groupName": "Ignore update androidx.core:core-ktx for Android API < 19",
      "enabled": false,
      "matchDepNames": ["androidx.core:core-ktx"],
      "matchManagers": ["regex", "gradle"],
      "matchCurrentVersion": "/^1\\.12\\.0/",
      "matchCurrentValue": "/^1\\.12\\.0/"
    },
    {
      "groupName": "Update Ubuntu to LTS versions",
      "matchDepNames": ["ubuntu"],
      "matchManagers": ["regex", "dockerfile"],
      "versioning": "ubuntu",
      "allowedVersions": "/^[0-9]+\\.04$/"
    },
    {
      "groupName": "Update conan dependencies",
      "matchDepNames": ["pcg-cpp", "stb"],
      "matchManagers": ["conan"],
      "versioning": "conan",
      "allowedVersions": "!/^cci\\.[0-9]+$/"
    },
    {
      "groupName": "Ignore update Android Gradle version for Android API <= 21",
      "enabled": false,
      "matchDepNames": ["com.android.tools.build:gradle"],
      "matchManagers": ["regex", "gradle"],
      "matchCurrentVersion": "/^8\\.2\\.2$/",
      "matchCurrentValue": "/^8\\.2\\.2$/"
    },
    {
      "groupName": "Update NDK to stable versions",
      "matchDepNames": ["android/ndk"],
      "versioning": "regex:^r?(?<major>[0-9]+)\\.?(?<minor>[0-9a-z]+)?\\.?(?<patch>[0-9]+)?-?(?<prerelease>[0-9a-z]+)?.*$",
      "allowedVersions": "!/^r[0-9]+\\-.*$/"
    },
    {
      "groupName": "Ignore update NDK for Android API < 21",
      "enabled": false,
      "matchDepNames": ["android/ndk"],
      "matchCurrentVersion": "/^23\\.2\\.8568313$/",
      "matchCurrentValue": "/^23\\.2\\.8568313$/"
    },
    {
      "groupName": "Update Boost C++ Libraries",
      "matchDepNames": ["boostorg/boost"],
      "extractVersion": "^boost-(?<version>.*)$"
    },
    {
      "groupName": "Update GoogleTest to a version that supports C++11",
      "matchDepNames": ["google/googletest"],
      "versioning": "regex:^(v|release-)?(?<major>[0-9]+)\\.(?<minor>[0-9]+)\\.(?<patch>[0-9]+)-?(?<prerelease>[0-9a-z]+)?.*$",
      "allowedVersions": "<1.13"
    },
    {
      "groupName": "Update MobileRT docker images",
      "matchDepNames": ["ptpuscas/mobile_rt"],
      "versioning": "regex:^(?<compatibility>[a-z]+)-(?<major>[0-9]+)\\.(?<minor>[0-9]+)\\.?(?<patch>[0-9]+)?-?(?<prerelease>[0-9a-z]+)?.*$"
    },
    {
      "groupName": "Ignore update Operating Systems on Github Runners if latest is used",
      "enabled": false,
      "matchManagers": ["regex"],
      "versioning": "regex:^(?<major>[0-9]+)?\\.?(?<minor>[0-9]+)?.*$",
      "matchCurrentVersion": "/^latest$/",
      "matchCurrentValue": "/^latest$/"
    },
    {
      "groupName": "Ignore specific versions of Ubuntu already being used",
      "enabled": false,
      "matchDatasources": ["github-runners"],
      "matchDepNames": ["ubuntu"],
      "versioning": "regex:^(?<major>[0-9]+)?\\.?(?<minor>[0-9]+)?.*$",
      "matchCurrentVersion": "!/^20\\.04$/"
    }
  ]
}
