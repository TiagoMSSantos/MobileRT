{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "enabled": true,
  "extends": [
    "config:base",
    "github>whitesource/merge-confidence:beta",
    ":dependencyDashboard",
    ":rebaseStalePrs",
    ":automergePr",
    ":automergeRequireAllStatusChecks",
    ":automergeDigest",
    ":automergeLinters",
    ":automergeTesters",
    ":automergeTypes",
    ":automergePatch",
    ":semanticCommits"
  ],
  "timezone": "UTC",
  "branchPrefix": "up-renovate-",
  "fetchReleaseNotes": true,
  "separateMajorMinor": true,
  "separateMinorPatch": true,
  "separateMultipleMajor": true,
  "separateMultipleMinor": false,
  "ignoreTests": false,
  "prConcurrentLimit": 0,
  "prHourlyLimit": 0,
  "rebaseWhen": "auto",
  "reviewersFromCodeOwners": true,
  "recreateClosed": false,
  "major": {
    "enabled": true,
    "automerge": false
  },
  "minor": {
    "enabled": true,
    "automerge": false
  },
  "patch": {
    "enabled": true,
    "automerge": true,
    "groupName": "all patch updates"
  },
  "regex": {
    "enabled": true
  },
  "git-submodules": {
    "enabled": false
  },
  "bundler": {
    "enabled": false
  },
  "conan": {
    "enabled": true
  },
  "pre-commit": {
    "enabled": true
  },
  "docker": {
    "enabled": true
  },
  "dockerfile": {
    "enabled": true
  },
  "gradle": {
    "enabled": true
  },
  "maven": {
    "enabled": true
  },
  "customManagers": [
    {
      "fileMatch": ["Dockerfile", "\\.github\\/workflows\\/.+\\.ya?ml"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "BASE_IMAGE=(?<depName>.*?):(?<currentValue>.*)",
        "BASE_IMAGE: (?<depName>.*?):(?<currentValue>.*)"
      ],
      "datasourceTemplate": "docker",
      "customType": "regex"
    },
    {
      "fileMatch": ["build.gradle"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "common_libraries_android_framework = ['\"](?<currentValue>.*)['\"]"
      ],
      "depNameTemplate": "androidx.core:core-ktx",
      "datasourceTemplate": "maven",
      "versioningTemplate": "gradle",
      "customType": "regex",
      "registryUrlTemplate": "https://dl.google.com/android/maven2"
    },
    {
      "fileMatch": ["\\.github\\/workflows\\/android_matrix\\.json"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "['\"]gradle_version['\"]: ['\"](?<currentValue>.*?)['\"]"
      ],
      "depNameTemplate": "com.android.tools.build:gradle",
      "datasourceTemplate": "maven",
      "versioningTemplate": "gradle",
      "customType": "regex",
      "registryUrlTemplate": "https://dl.google.com/android/maven2"
    },
    {
      "fileMatch": ["\\.github\\/workflows\\/android_matrix\\.json"],
      "matchStringsStrategy": "any",
      "matchStrings": [
        "['\"]ndk_version['\"]: ['\"](?<currentValue>.*?)['\"]"
      ],
      "depNameTemplate": "android/ndk",
      "datasourceTemplate": "github-releases",
      "customType": "regex",
      "registryUrlTemplate": "https://github.com"
    }
  ],
  "packageRules": [
    {
      "groupName": "Ignore update androidx.core:core-ktx for Android API < 19",
      "enabled": false,
      "matchDepNames": ["androidx.core:core-ktx"],
      "matchManagers": ["regex", "gradle"],
      "matchCurrentVersion": "/^1\\.12\\.0/",
      "matchCurrentValue": "/^1\\.12\\.0/"
    },
    {
      "groupName": "Update Ubuntu to LTS versions",
      "matchDepNames": ["ubuntu"],
      "matchManagers": ["regex", "dockerfile"],
      "versioning": "ubuntu",
      "allowedVersions": "/^[0-9]+\\.04$/"
    },
    {
      "groupName": "Update conan dependencies",
      "matchDepNames": ["pcg-cpp", "stb"],
      "matchManagers": ["conan"],
      "versioning": "conan",
      "allowedVersions": "!/^cci\\.[0-9]+$/"
    },
    {
      "groupName": "Ignore update Android Gradle version for Android API <= 21",
      "enabled": false,
      "matchDepNames": ["com.android.tools.build:gradle"],
      "matchManagers": ["regex", "gradle"],
      "matchCurrentVersion": "/^8\\.2\\.2$/",
      "matchCurrentValue": "/^8\\.2\\.2$/"
    },
    {
      "groupName": "Update NDK to stable versions",
      "matchDepNames": ["android/ndk"],
      "versioning": "regex:^r?(?<major>[0-9]+).*$",
      "allowedVersions": "!/^r[0-9]+\\-.*$/"
    }
  ]
}
